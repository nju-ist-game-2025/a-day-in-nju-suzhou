第三关boss是ZhangCow（奶牛张）
当玩家进入第三关boss房间时，触发剧情动画，奶牛张出现并开始对话。
对话的背景图片使用assets/boss_dia/boss3_1.png。

## 背景故事
奶牛张是我们的概统老师，得名于他的头像是一头奶牛。他的事迹：
1. 期中考试难度极高，导致全班同学集体崩溃。成绩正态分布的均值只有六十多分。
2. 他期中考试后，被调到了北京，本来应该是晋升的好事。但他却说："哈哈，喜忧参半吧！"

## 初始剧情
玩家进入boss房，感到一股强大的压力。房间里弥漫着数学公式的气息。
（此时让奶牛张的图片叠加到背景之上，从屏幕左侧缓缓移动到画面中间。移至中间时，对话开始）

奶牛张：哦？又来了一位勇敢的同学？
奶牛张：让我看看...根据极大似然估计，你通过这场考试的概率是...
奶牛张：嗯，不太乐观啊！
玩家：老师，我只是想通过这一关...
奶牛张：通过？哈哈，这让我想起了那次期中考试...
奶牛张：全班的成绩呈完美的正态分布，均值μ=62，方差σ²=144...
奶牛张：多么美丽的数据啊！
玩家：（那不就是大家都差点挂科吗...）
奶牛张：好了，让我们开始今天的"随堂测验"吧！

---

## 机制

奶牛张有三个阶段：分别是**授课阶段**、**期中考试阶段**和**调离阶段**。

### 血量设置
奶牛张的血量设置为500

---

### 第一阶段：授课阶段（100%~60%血量）

使用图片：assets/boss/Teacher/cow.png

**移动方式**：MOVE_KEEP_DISTANCE，与玩家保持一定距离，像老师在讲台上踱步。

**攻击技能**：

1. **概率弹幕 - 正态分布**
   - 奶牛张向玩家方向发射一组弹幕，弹幕的散布角度符合正态分布
   - 中间密集，两侧稀疏，形成钟形曲线的弹幕墙
   - 弹幕图片：assets/boss/Teacher/formula_bullet.png（数学公式样式）

2. **随机点名**
   - 每隔8秒，奶牛张会"点名"，在玩家当前位置生成一个红色标记圈（只绘制周围的白圈）
   - 1.5秒后该位置会落下一道"粉笔光束"造成大量伤害（使用assets/boss/Teacher/chalk_beam.png，当粉笔落到圈内，产生爆炸效果，使用assets/explosion中的爆炸图片（参考clockboom的爆炸实现））
   - 玩家需要及时躲开标记区域

**初始阶段小怪**：由level3.json控制，如生成"卷王同学"小怪（疯狂追击玩家）（目前先不关心初始生成的小怪）

---

### 第二阶段：期中考试阶段（60%~30%血量）

当血量低于60%时，血条变为**橙色**，奶牛张进入期中考试阶段。

使用图片：assets/boss/Teacher/cowAngry.png

**触发对话**：
奶牛张：看来你还挺能扛的...
奶牛张：那么，是时候进行【期中考试】了！
玩家：什么？！
奶牛张：别紧张，这只是一场"友好"的测验...
（屏幕短暂变暗，出现"期中考试开始"字样）

**移动方式**：变为DASH冲刺模式，会突然向玩家位置冲刺。

**攻击技能**：

1. **期中考卷**
   - 奶牛张抛出旋转的试卷
   - 试卷图片：assets/boss/Teacher/exam_paper.png
   - 被击中后玩家受到1点伤害并进入"晕厥"状态2秒（参考第二关枕头的实现）

2. **极大似然估计**
   - 奶牛张会预判玩家的移动方向，在预测位置释放一个陷阱
   - 陷阱图案由程序绘制，外面是红圈，中心是螺旋状的图案
   - 踩中陷阱会被定身1.5秒

3. **召唤监考员**
   - 每隔20秒召唤一个"监考员"小怪
   - 监考员图片：assets/boss/Teacher/invigilatorNormal.png
   - 监考员会围绕奶牛张巡逻，发现玩家后会切换状态冲向玩家，切换后的图片：assets/boss/Teacher/invigilatorAngry.png

---

### 第三阶段：调离阶段（30%~0%血量）

当血量低于30%时，进入调离阶段。

**吸纳动画**：奶牛张飞出画面外，然后画面白屏。

使用图片：assets/boss/Teacher/cowFinal.png
对话背景图：assets/boss_dia/boss3_2.png

**触发对话**：
奶牛张：哈...哈哈...
奶牛张：你知道吗，我要被调到北京去了。
玩家：恭喜老师高升？
奶牛张：高升？哈哈，喜忧参半吧！
奶牛张：喜的是，终于可以离开这里...
奶牛张：忧的是，我还没来得及...让你们见识真正的概率论！
玩家：（不妙...）
奶牛张：在我离开之前，让你体验一下什么叫做...
奶牛张：【方差爆炸】！

**场景变化**：游戏背景变成 assets/background/examRoom.png（考场背景，充满飘飞的试卷）

**移动方式**：MOVE_KEEP_DISTANCE，但移动速度大幅提升

**攻击技能**：

1. **挂科警告（追踪红圈）**
   - 每隔6秒在玩家脚下生成一个红色警告圈
   - 1秒后该位置爆炸，造成大量伤害
   - 实现方式：复用第一阶段的"随机点名"，加快频率、增加数量
   - 圈图案由程序绘制，红圈内侧是警告纹理

2. **公式轰炸（环形弹幕）**
   - 奶牛张每隔4秒向四周发射一圈弹幕（12发，均匀分布360度）
   - 每次发射时圈的起始角度随机，让玩家难以预判缝隙位置
   - 实现方式：简单的角度循环 + 随机初始偏移
   - 弹幕图片：assets/boss/Teacher/formula_bullet.png

3. **喜忧参半（分裂弹）**
   - 奶牛张向玩家方向发射一个大型弹幕
   - 大弹幕飞行一段距离后分裂成5个小弹幕，呈扇形散开
   - 实现方式：主弹幕设定飞行距离，到达后销毁并生成5个子弹幕
   - 弹幕图片：assets/boss/Teacher/final_bullet.png

---

## 打败奶牛张

当奶牛张血量降为0时，触发结束对话。
对话背景图：assets/boss_dia/boss3_3.png

奶牛张：咳咳...没想到，你真的通过了...
奶牛张：看来我的极大似然估计...出了点偏差。
玩家：老师，您...
奶牛张：没关系，这是一个很好的样本数据。
奶牛张：我会把它记录下来，用于改进我的模型。
奶牛张：去吧，勇敢的同学...
奶牛张：记住，生活就像概率论...
奶牛张：充满不确定性，但总有规律可循。
玩家：老师，北京那边...
奶牛张：哈哈，喜忧参半吧！再见了。
（奶牛张化作一道光消散，留下一个道具：【奶牛的祝福】）

**掉落道具**：奶牛的祝福
- 效果：受到伤害时有一定概率（服从正态分布）完全免疫该伤害
- 触发时显示文字："根据大数定律，这次不算！"
(关于掉落的道具，先不实现，目前对话结束后，按照前两个关卡的设计，天空掉落乌萨奇)

乌萨奇的对话可以自由发挥。这一关是最后关卡，乌萨奇恭喜玩家通关，并预告后续版本会有更多内容。然后游戏结束。
